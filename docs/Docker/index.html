<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Docker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Docker and containerzation | Learn with Sandeep</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://Sandeep-Petwal.github.io/readmes/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://Sandeep-Petwal.github.io/readmes/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://Sandeep-Petwal.github.io/readmes/docs/Docker"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="Sandeep Prasad, learn, notes, web development, MERN stack, Git, Docker, Docusaurus, documentation, developer learning, second brain"><meta data-rh="true" name="author" content="Sandeep Prasad"><meta data-rh="true" name="robots" content="index, follow"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Docker and containerzation | Learn with Sandeep"><meta data-rh="true" name="description" content="Understanding of conatinerization and docker, images, cli and containers."><meta data-rh="true" property="og:description" content="Understanding of conatinerization and docker, images, cli and containers."><link data-rh="true" rel="icon" href="/readmes/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Sandeep-Petwal.github.io/readmes/docs/Docker"><link data-rh="true" rel="alternate" href="https://Sandeep-Petwal.github.io/readmes/docs/Docker" hreflang="en"><link data-rh="true" rel="alternate" href="https://Sandeep-Petwal.github.io/readmes/docs/Docker" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Docker","item":"https://Sandeep-Petwal.github.io/readmes/docs/Docker"}]}</script><link rel="alternate" type="application/rss+xml" href="/readmes/blog/rss.xml" title="Learn with Sandeep RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/readmes/blog/atom.xml" title="Learn with Sandeep Atom Feed"><link rel="stylesheet" href="/readmes/assets/css/styles.53f2efe2.css">
<script src="/readmes/assets/js/runtime~main.5453f897.js" defer="defer"></script>
<script src="/readmes/assets/js/main.879ea12a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/readmes/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/readmes/"><div class="navbar__logo"><img src="/readmes/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/readmes/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Learn with Sandeep</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/readmes/docs/intro">My notes</a><a class="navbar__item navbar__link" href="/readmes/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://sandeepprasad.xyz/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/Sandeep-Petwal/readmes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/readmes/docs/intro">Intro! 🚀</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/readmes/docs/category/frontend-technologies">Frontend Technologies</a><button aria-label="Expand sidebar category &#x27;Frontend Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/readmes/docs/category/backend-technologies">Backend Technologies</a><button aria-label="Expand sidebar category &#x27;Backend Technologies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/readmes/docs/Docker">Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/readmes/docs/Git">Git</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/readmes/docs/Microservice-architecture">Microservices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/readmes/docs/Redis">Redis</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/readmes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Docker</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DOCKER</h1></header>
<ol>
<li><strong>Containerization</strong></li>
</ol>
<p>Containerization is like putting each part of your software (your application code, all its libraries, dependencies, and even a miniature operating system) into its own standardized, self-contained box – a container.</p>
<p><strong>Key Idea:</strong> It packages an application and all its dependencies into a single, isolated unit. This unit can then be run consistently across different computing environments, regardless of the underlying infrastructure.</p>
<p><strong>Problem it Solves:</strong></p>
<blockquote>
<p>&quot;It works on my machine!&quot; This common developer lament arises because differences in operating systems, libraries, and configurations between development, testing, and production environments can lead to unexpected bugs and deployment issues. Containerization aims to eliminate this.</p>
</blockquote>
<hr>
<ol start="2">
<li><strong>Virtual Machines (VMs) vs. Containers: A Crucial Distinction</strong></li>
</ol>
<p>Before containers, Virtual Machines (VMs) were the primary way to achieve isolated environments. Understanding the difference is key.</p>
<table><thead><tr><th>Feature</th><th>Virtual Machine (VM)</th><th>Container</th></tr></thead><tbody><tr><td>Isolation Level</td><td>Hardware-level virtualization (hypervisor)</td><td>Operating System (OS)-level virtualization</td></tr><tr><td>OS Footprint</td><td>Each VM has its own full Guest OS (e.g., Windows, Linux)</td><td>Shares the Host OS kernel</td></tr><tr><td>Resource Usage</td><td>High (CPU, RAM) due to full OS overhead</td><td>Low (lightweight, efficient)</td></tr><tr><td>Portability</td><td>Portable, but larger images</td><td>Highly portable, smaller images</td></tr><tr><td>Use Case</td><td>Running multiple different OSes on one machine</td><td>Running multiple isolated applications on one OS</td></tr><tr><td>Analogy</td><td>Separate apartments in a building, each with its own utilities</td><td>Separate rooms in a house, sharing the same foundation and plumbing</td></tr></tbody></table>
<p><strong>Key Takeaway:</strong> Containers are much more lightweight and efficient than VMs because they don&#x27;t carry the overhead of a full operating system for each application. They share the host OS kernel, leading to faster startup times and better resource utilization.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-docker">What is Docker?<a href="#what-is-docker" class="hash-link" aria-label="Direct link to What is Docker?" title="Direct link to What is Docker?">​</a></h2>
<p>If containerization is the concept, <strong>Docker</strong> is the most popular platform/tool that implements containerization. It&#x27;s an open-source platform that enables developers to build, ship, and run applications inside containers.</p>
<p>Think of Docker as:</p>
<ul>
<li><strong>The Containerization Engine:</strong> It provides the tools to create, run, and manage containers.</li>
<li><strong>A Standard for Packaging:</strong> It defines a standardized format for packaging applications and their dependencies into &quot;Docker Images.&quot;</li>
<li><strong>A Registry:</strong> It offers Docker Hub, a cloud-based registry where you can store and share Docker images.</li>
</ul>
<p><strong>Image vs Container:</strong></p>
<ul>
<li>A <strong>Docker image</strong> is a static, read-only template that contains everything needed to run an application, such as code, libraries, and dependencies.</li>
<li>A <strong>Docker container</strong> is a running instance of that image, which is mutable and can perform operations, retain changes (like logs or data), and interact with other containers or the host system.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-docker-concepts">Key Docker Concepts<a href="#key-docker-concepts" class="hash-link" aria-label="Direct link to Key Docker Concepts" title="Direct link to Key Docker Concepts">​</a></h2>
<ul>
<li>
<p><strong>Docker Engine:</strong> The core of Docker. It&#x27;s a client-server application with:</p>
<ul>
<li><strong>Docker Daemon (dockerd):</strong> The server, a persistent background process that manages Docker objects (images, containers, networks, volumes).</li>
<li><strong>Docker CLI (docker):</strong> The command-line client that allows users to interact with the Docker Daemon.</li>
<li><strong>REST API:</strong> An interface for programs to communicate with the Daemon.</li>
</ul>
</li>
<li>
<p><strong>Docker Image:</strong></p>
<ul>
<li>A lightweight, standalone, executable package that includes everything needed to run a piece of software, including the code, a runtime, libraries, environment variables, and config files.</li>
<li><strong>Nature:</strong> It&#x27;s a read-only template used to create Docker containers.</li>
<li><strong>Layers:</strong> Images are built from a series of layers. Each instruction in a Dockerfile creates a new layer. This layering makes images efficient as common layers can be shared between multiple images, and updates only require rebuilding changed layers.</li>
<li><strong>Example:</strong> An image could contain an Ubuntu base OS, Node.js runtime, and your web application code.</li>
</ul>
</li>
<li>
<p><strong>Docker Container:</strong></p>
<ul>
<li>A runnable instance of a Docker image.</li>
<li><strong>Nature:</strong> It&#x27;s the actual running environment where your application executes.</li>
<li><strong>Ephemeral (क्षणिक):</strong> Containers are designed to be ephemeral. You can start, stop, move, or delete them. If a container crashes, you can quickly spin up a new one from its image.</li>
<li><strong>Isolation:</strong> Each container runs in isolation from other containers and the host system, ensuring consistent behavior.</li>
</ul>
</li>
<li>
<p><strong>Dockerfile:</strong></p>
<ul>
<li>A simple text file that contains a set of instructions (commands) for building a Docker image.</li>
<li><strong>Purpose:</strong> It&#x27;s like a recipe. You define the base image, copy your application files, install dependencies, expose ports, and define the command to run when the container starts.</li>
</ul>
</li>
</ul>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Use an official Node.js runtime as a parent image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM node:18-alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set the working directory in the container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy package.json and package-lock.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY package*.json ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install app dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN npm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy the rest of the application code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Expose port 3000 to the outside world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 3000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Define the command to run your app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;node&quot;, &quot;server.js&quot;]</span><br></span></code></pre></div></div>
<ul>
<li>
<p><strong>Docker Hub (Registry):</strong></p>
<ul>
<li>A cloud-based public registry service provided by Docker for finding and sharing Docker images.</li>
<li><strong>Functionality:</strong> We can push our custom images to Docker Hub (or a private registry) and pull images created by others. This acts as a centralized repository for container images.</li>
</ul>
</li>
<li>
<p><strong>Docker Compose:</strong></p>
<ul>
<li>A tool for defining and running multi-container Docker applications.</li>
<li><strong>Purpose:</strong> When your application consists of multiple services (e.g., a web app, a database, a cache), Docker Compose allows you to define all these services in a single <code>docker-compose.yml</code> file and manage them together with a single command (<code>docker-compose up</code>).</li>
</ul>
</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.8&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3000:3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_DB</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mydb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span></code></pre></div></div>
<ul>
<li>
<p><strong>Docker Volumes:</strong></p>
<ul>
<li>The preferred mechanism for persisting data generated by and used by Docker containers.</li>
<li><strong>Purpose:</strong> By default, data inside a container is lost when the container is removed. Volumes allow you to store data outside the container on the host machine, ensuring data persistence even if the container is deleted or recreated.</li>
<li><strong>Types:</strong> Anonymous volumes, named volumes, bind mounts.</li>
</ul>
</li>
<li>
<p><strong>Docker Networks:</strong></p>
<ul>
<li>Enable communication between Docker containers and between containers and the host machine.</li>
<li><strong>Purpose:</strong> Docker provides various networking drivers (bridge, host, overlay, etc.) to allow containers to communicate securely and efficiently, even across different hosts (in the case of overlay networks).</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-the-docker-workflow-simplified">5. The Docker Workflow (Simplified)<a href="#5-the-docker-workflow-simplified" class="hash-link" aria-label="Direct link to 5. The Docker Workflow (Simplified)" title="Direct link to 5. The Docker Workflow (Simplified)">​</a></h2>
<ol>
<li><strong>Write a Dockerfile:</strong> Define how your application image should be built.</li>
<li><strong>Build the Image:</strong> Use <code>docker build</code> to create a Docker image from your Dockerfile. This creates layers.</li>
<li><strong>Run the Container:</strong> Use <code>docker run</code> to create and start a container from your image.</li>
<li><strong>Manage:</strong> Use <code>docker ps</code>, <code>docker stop</code>, <code>docker rm</code> to manage running containers.</li>
<li><strong>Push/Pull (Optional):</strong> Push your image to Docker Hub (<code>docker push</code>) or pull existing images (<code>docker pull</code>).</li>
<li><strong>Orchestrate (for multi-service apps):</strong> Use docker compose to manage multiple interconnected containers.</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-benefits-of-containerization-and-docker">6. Benefits of Containerization (and Docker)<a href="#6-benefits-of-containerization-and-docker" class="hash-link" aria-label="Direct link to 6. Benefits of Containerization (and Docker)" title="Direct link to 6. Benefits of Containerization (and Docker)">​</a></h2>
<ul>
<li><strong>Consistency/Portability:</strong> &quot;Write once, run anywhere.&quot; Ensures applications run identically across development, testing, and production environments, eliminating &quot;it works on my machine&quot; issues.</li>
<li><strong>Isolation:</strong> Each container is isolated, preventing conflicts between applications and ensuring that one application&#x27;s issues don&#x27;t affect others on the same host.</li>
<li><strong>Efficiency:</strong> Lightweight nature compared to VMs means better resource utilization and faster startup times.</li>
<li><strong>Scalability:</strong> Easy to scale applications up or down by launching more or fewer containers. Orchestration tools like Kubernetes take this to the next level.</li>
<li><strong>Faster Development Cycles:</strong> Developers can quickly set up consistent development environments.</li>
<li><strong>Simplified Deployment:</strong> Streamlines the deployment process, making it more reliable and repeatable.</li>
<li><strong>Version Control:</strong> Docker images can be versioned, allowing easy rollbacks to previous stable versions.</li>
<li><strong>Modularity:</strong> Encourages microservices architecture, where applications are broken down into smaller, independent services, each running in its own container.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-real-world-applications-in-web-development">7. Real-World Applications in Web Development<a href="#7-real-world-applications-in-web-development" class="hash-link" aria-label="Direct link to 7. Real-World Applications in Web Development" title="Direct link to 7. Real-World Applications in Web Development">​</a></h2>
<ul>
<li><strong>Consistent Development Environments:</strong> Every developer on a team uses the exact same setup, reducing &quot;works on my machine&quot; issues.</li>
<li><strong>Microservices Architecture:</strong> Breaking down large monolithic web applications into smaller, independent services (e.g., user service, product service, order service), each running in its own container.</li>
<li><strong>CI/CD Pipelines:</strong> Integrating Docker into Continuous Integration/Continuous Delivery pipelines for automated building, testing, and deployment of applications.</li>
<li><strong>Database Management:</strong> Running databases (PostgreSQL, MongoDB, Redis) in containers for development and testing, making it easy to spin up and tear down instances.</li>
<li><strong>Local Testing:</strong> Easily test different versions of dependencies or an application against different environments without cluttering your local machine.</li>
<li><strong>Serverless Functions (often powered by containers):</strong> While not directly Docker, concepts of containerization underpin many serverless platforms.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-conclusion-and-next-steps">8. Conclusion and Next Steps<a href="#8-conclusion-and-next-steps" class="hash-link" aria-label="Direct link to 8. Conclusion and Next Steps" title="Direct link to 8. Conclusion and Next Steps">​</a></h2>
<p>Containerization, with Docker at its forefront, has revolutionized how software is developed, delivered, and deployed. It&#x27;s a cornerstone of modern DevOps practices and cloud-native application development.</p>
<p>For your notes, remember these core ideas:</p>
<ul>
<li><strong>Containerization = Isolated, Portable Packages.</strong></li>
<li><strong>Docker = The Tool to Implement It.</strong></li>
<li><strong>Image = Blueprint (read-only).</strong></li>
<li><strong>Container = Running Instance (read-write layer on top).</strong></li>
<li><strong>Dockerfile = Recipe for building an Image.</strong></li>
<li><strong>Benefits:</strong> Consistency, Efficiency, Scalability, Portability.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="commands">Commands<a href="#commands" class="hash-link" aria-label="Direct link to Commands" title="Direct link to Commands">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-containers">A. Containers<a href="#a-containers" class="hash-link" aria-label="Direct link to A. Containers" title="Direct link to A. Containers">​</a></h3>
<table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>docker run -d -p &lt;host_port&gt;:&lt;container_port&gt; &lt;image_name&gt;:&lt;tag&gt;</code></td><td>Run a container in detached mode from a specified image, and map container port to host port. <br>Example: <code>docker run -d -p 3000:3000 my-mern-app</code></td></tr><tr><td><code>docker ps</code></td><td>List all running containers.</td></tr><tr><td><code>docker ps -a</code></td><td>List all containers, including stopped ones.</td></tr><tr><td><code>docker stop &lt;container_id or name&gt;</code></td><td>Stop a running container. You can get the container ID from docker ps. <br>Example: <code>docker stop my-container</code></td></tr><tr><td><code>docker start &lt;container_id or name&gt;</code></td><td>Start a stopped container. <br>Example: <code>docker start my-container</code></td></tr><tr><td><code>docker restart &lt;container_id or name&gt;</code></td><td>Restart a running or stopped container. <br>Example: <code>docker restart my-container</code></td></tr><tr><td><code>docker rm &lt;container_id or name&gt;</code></td><td>Remove a stopped container. You can remove multiple containers by specifying multiple IDs. <br>Example: <code>docker rm my-container</code></td></tr><tr><td><code>docker logs &lt;container_id or name&gt;</code></td><td>View logs from a container (helpful for debugging or monitoring). <br>Example: <code>docker logs my-container</code></td></tr><tr><td><code>docker exec -it &lt;container_id or name&gt; /bin/bash</code></td><td>Open an interactive terminal (bash) inside a running container to inspect or interact with it. <br>Example: <code>docker exec -it my-container /bin/bash</code></td></tr><tr><td><code>docker attach &lt;container_id or name&gt;</code></td><td>Attach to a running container&#x27;s main process (e.g., view output or send input). <br>Example: <code>docker attach my-container</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-images">B. Images<a href="#b-images" class="hash-link" aria-label="Direct link to B. Images" title="Direct link to B. Images">​</a></h3>
<table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>docker build -t &lt;image_name&gt;:&lt;tag&gt; &lt;path_to_dockerfile&gt;</code></td><td>Build a Docker image from a Dockerfile. <br>Example: <code>docker build -t my-mern-app .</code></td></tr><tr><td><code>docker images</code></td><td>List all Docker images available on your local machine.</td></tr><tr><td><code>docker rmi &lt;image_name&gt;:&lt;tag&gt;</code></td><td>Remove a Docker image from your local system. <br>Example: <code>docker rmi my-mern-app</code></td></tr><tr><td><code>docker tag &lt;image_id&gt; &lt;new_image_name&gt;:&lt;new_tag&gt;</code></td><td>Tag an existing image with a new name or version. <br>Example: <code>docker tag abc123 my-mern-app:v2</code></td></tr><tr><td><code>docker pull &lt;image_name&gt;:&lt;tag&gt;</code></td><td>Download a Docker image from Docker Hub (or another registry). <br>Example: <code>docker pull node:14</code></td></tr><tr><td><code>docker push &lt;image_name&gt;:&lt;tag&gt;</code></td><td>Upload a Docker image to a registry like Docker Hub. <br>Example: <code>docker push my-mern-app:v1</code></td></tr><tr><td><code>docker history &lt;image_name&gt;:&lt;tag&gt;</code></td><td>View the history of an image, including layers and commands used to create it.</td></tr><tr><td><code>docker inspect &lt;image_name&gt;:&lt;tag&gt;</code></td><td>Get detailed information (JSON format) about a Docker image, including configuration and layers.</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-port-mapping">What is Port Mapping?<a href="#what-is-port-mapping" class="hash-link" aria-label="Direct link to What is Port Mapping?" title="Direct link to What is Port Mapping?">​</a></h2>
<p>When a container runs a service (e.g., a Node.js server on port 3000), it listens inside the container. But if you want to access it from your host machine (like your browser or Postman), you need to map the container&#x27;s internal port to a port on your host.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -p &lt;host_port&gt;:&lt;container_port&gt; &lt;image_name&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -It -p 3000:3000 my-node-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># with environment values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -it -p 3000:3500 -e key=value -e stripe_key=value my-node-app</span><br></span></code></pre></div></div>
<hr>
<h1>Docker Compose: Orchestrating Multi-Container Applications</h1>
<p>What happens when your application isn&#x27;t just one container, but a collection of interconnected services? For example:</p>
<ul>
<li>A web application (Node.js, Python Flask, React frontend served by Nginx)</li>
<li>A database (PostgreSQL, MongoDB, MySQL)</li>
<li>A caching service (Redis)</li>
<li>A message queue (RabbitMQ, Kafka)</li>
</ul>
<p>Manually starting each container with <code>docker run</code>, ensuring they are on the same network, mapping ports, and setting environment variables, would quickly become cumbersome, error-prone, and difficult to reproduce. This is where Docker Compose shines.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-what-is-docker-compose">1. What is Docker Compose?<a href="#1-what-is-docker-compose" class="hash-link" aria-label="Direct link to 1. What is Docker Compose?" title="Direct link to 1. What is Docker Compose?">​</a></h2>
<p>Docker Compose is a tool for defining and running multi-container Docker applications. It allows you to define all the services that make up your application in a single YAML file, and then spin up, tear down, and manage all of them with a single command.</p>
<p><strong>Key Idea:</strong> It simplifies the process of configuring, running, and linking multiple interdependent Docker containers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-the-docker-composeyml-file-the-heart-of-compose">2. The docker-compose.yml File: The Heart of Compose<a href="#2-the-docker-composeyml-file-the-heart-of-compose" class="hash-link" aria-label="Direct link to 2. The docker-compose.yml File: The Heart of Compose" title="Direct link to 2. The docker-compose.yml File: The Heart of Compose">​</a></h2>
<p>The core of Docker Compose is the <code>docker-compose.yml</code> (or <code>compose.yaml</code>, the preferred modern name) file. This YAML file is a declarative configuration that describes your entire application stack.</p>
<p><strong>Why YAML?</strong> YAML (YAML Ain&#x27;t Markup Language) is chosen because it&#x27;s human-readable and easy to write, making it ideal for configuration files.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="structure-of-a-docker-composeyml-file">Structure of a docker-compose.yml File<a href="#structure-of-a-docker-composeyml-file" class="hash-link" aria-label="Direct link to Structure of a docker-compose.yml File" title="Direct link to Structure of a docker-compose.yml File">​</a></h3>
<p>The file typically has a few top-level keys:</p>
<ul>
<li><code>version</code>: Specifies the Compose file format version (e.g., 3.8). This is important for compatibility and feature sets.</li>
<li><code>services</code>: This is the most important section. It defines the individual containers (services) that make up your application. Each service corresponds to a Docker container.</li>
<li><code>volumes</code> (Optional): Defines named volumes for persistent data storage. These volumes can be shared between services or persist data even if containers are recreated.</li>
<li><code>networks</code> (Optional): Defines custom networks for your services to communicate over. By default, Compose creates a default network for all services in the file, but you can define custom ones for more control or isolation.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-docker-composeyml-web-app-with-database">Example docker-compose.yml (Web App with Database)<a href="#example-docker-composeyml-web-app-with-database" class="hash-link" aria-label="Direct link to Example docker-compose.yml (Web App with Database)" title="Direct link to Example docker-compose.yml (Web App with Database)">​</a></h4>
<p>Let&#x27;s consider a common web development scenario: a Node.js API, a PostgreSQL database, and a React frontend served by Nginx.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># docker-compose.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.8&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Specify the Compose file format version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 1. Backend Service (Node.js API)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./backend </span><span class="token comment" style="color:#999988;font-style:italic"># Path to the directory containing the Dockerfile for the backend</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dockerfile </span><span class="token comment" style="color:#999988;font-style:italic"># Name of the Dockerfile (optional if named Dockerfile)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3001:3001&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Map host port 3001 to container port 3001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Environment variables for the backend service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">DATABASE_URL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">password@db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5432/mydatabase </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">NODE_ENV</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> development</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db </span><span class="token comment" style="color:#999988;font-style:italic"># Ensure &#x27;db&#x27; service starts before &#x27;backend&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/app </span><span class="token comment" style="color:#999988;font-style:italic"># Mount the local backend code into the container for live updates (dev)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /app/node_modules </span><span class="token comment" style="color:#999988;font-style:italic"># Anonymous volume to prevent host&#x27;s node_modules overwriting container&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 2. Database Service (PostgreSQL)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">15</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">alpine </span><span class="token comment" style="color:#999988;font-style:italic"># Use a pre-built PostgreSQL image from Docker Hub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_DB</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mydatabase </span><span class="token comment" style="color:#999988;font-style:italic"># Database name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> user     </span><span class="token comment" style="color:#999988;font-style:italic"># Database user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password </span><span class="token comment" style="color:#999988;font-style:italic"># Database password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/postgresql/data </span><span class="token comment" style="color:#999988;font-style:italic"># Persist database data using a named volume</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5432:5432&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Expose database port (optional, good for local access)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 3. Frontend Service (React App served by Nginx)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">frontend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./frontend </span><span class="token comment" style="color:#999988;font-style:italic"># Path to the directory containing the Dockerfile for the frontend</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dockerfile </span><span class="token comment" style="color:#999988;font-style:italic"># Name of the Dockerfile (optional if named Dockerfile)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80:80&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Map host port 80 to container port 80 (Nginx default)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> backend </span><span class="token comment" style="color:#999988;font-style:italic"># Ensure &#x27;backend&#x27; service starts before &#x27;frontend&#x27; (if frontend calls backend on startup)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./frontend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/app </span><span class="token comment" style="color:#999988;font-style:italic"># Mount the local frontend code into the container (dev)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /app/node_modules </span><span class="token comment" style="color:#999988;font-style:italic"># Anonymous volume for frontend node_modules</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./nginx.conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/nginx/conf.d/default.conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">ro </span><span class="token comment" style="color:#999988;font-style:italic"># Mount custom Nginx config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Define named volumes for data persistence</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># This volume will persist PostgreSQL data</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="explanation-of-key-elements-in-the-example">Explanation of Key Elements in the Example:<a href="#explanation-of-key-elements-in-the-example" class="hash-link" aria-label="Direct link to Explanation of Key Elements in the Example:" title="Direct link to Explanation of Key Elements in the Example:">​</a></h4>
<ul>
<li><strong>services:</strong>
<ul>
<li><code>backend</code>, <code>db</code>, <code>frontend</code>: These are the names of our services. Docker Compose uses these names as hostnames within the default network, allowing services to communicate by name (e.g., backend can reach the database at db:5432).</li>
<li><strong>build:</strong>
<ul>
<li><code>context</code>: Specifies the path to the build context (directory containing the Dockerfile and application code).</li>
<li><code>dockerfile</code>: (Optional) Specifies the name of the Dockerfile if it&#x27;s not Dockerfile.</li>
<li>When build is used, Docker Compose will build an image for this service using the specified Dockerfile.</li>
</ul>
</li>
<li><strong>image:</strong> Used when you want to pull an existing image from Docker Hub or a private registry (like postgres:15-alpine). If both build and image are specified, build usually takes precedence.</li>
<li><strong>ports:</strong> Maps ports from the host machine to the container. Format: &quot;HOST_PORT<!-- -->:CONTAINER_PORT<!-- -->&quot;.<!-- -->
<ul>
<li><code>&quot;3001:3001&quot;</code> for backend: The backend service inside its container listens on port 3001. We expose it on host port 3001 so we can access it from our browser or other tools on the host.</li>
<li><code>&quot;80:80&quot;</code> for frontend: Frontend Nginx listens on port 80. We map it to host port 80, so the app is accessible via <a href="http://localhost" target="_blank" rel="noopener noreferrer">http://localhost</a>.</li>
</ul>
</li>
<li><strong>environment:</strong> Sets environment variables inside the container. This is crucial for configuration (e.g., database connection strings, API keys).</li>
<li><strong>depends_on:</strong> Declares dependencies between services. This ensures services are started in the correct order. backend will not start until db is running. frontend will not start until backend is running. <strong>Important Note:</strong> depends_on only waits for the dependent container to start, not for the application inside the container to be fully ready (e.g., database accepting connections). For more robust readiness checks, you might use healthcheck or external scripts in production.</li>
<li><strong>volumes:</strong> Mounts paths.<!-- -->
<ul>
<li><code>./backend:/app</code>: This is a bind mount. It syncs the local backend directory (where your Node.js code is) to the /app directory inside the container. This is invaluable for development, as code changes on your host machine are immediately reflected in the running container without rebuilding the image.</li>
<li><code>/app/node_modules</code>: This is an anonymous volume. When you bind mount your source code, you don&#x27;t want the node_modules directory from your host (which might have different binaries or versions) to overwrite the node_modules generated inside the container during npm install. By defining an anonymous volume on top of /app/node_modules, Docker essentially &quot;masks&quot; the host&#x27;s node_modules and uses the container&#x27;s generated ones.</li>
<li><code>db_data:/var/lib/postgresql/data</code>: This mounts the named volume db_data (defined at the bottom) to the PostgreSQL data directory inside the container. This ensures that your database data persists even if you stop and remove the db container.</li>
<li><code>./nginx.conf:/etc/nginx/conf.d/default.conf:ro</code>: Mounts a local Nginx configuration file into the frontend container in read-only mode (<!-- -->:ro<!-- -->).</li>
</ul>
</li>
</ul>
</li>
<li><strong>volumes (top-level):</strong>
<ul>
<li><code>db_data:</code>: Declares a named volume called db_data. Docker will manage this volume, and its data will persist independently of containers.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-key-docker-compose-commands">3. Key Docker Compose Commands<a href="#3-key-docker-compose-commands" class="hash-link" aria-label="Direct link to 3. Key Docker Compose Commands" title="Direct link to 3. Key Docker Compose Commands">​</a></h3>
<p>Once you have your <code>docker-compose.yml</code> file, you interact with your application stack using the <code>docker compose</code> command (note: older versions used <code>docker-compose</code> with a hyphen).</p>
<ul>
<li><code>docker compose up</code>:<!-- -->
<ul>
<li>The most frequently used command.</li>
<li>Reads the <code>docker-compose.yml</code> file.</li>
<li>If images are not specified or build is used, it builds the necessary images.</li>
<li>Creates networks and volumes if they don&#x27;t exist.</li>
<li>Starts all defined services as containers.</li>
<li>By default, it runs in the foreground, showing logs from all services.</li>
<li>Use <code>docker compose up -d</code> to run in detached mode (in the background).</li>
</ul>
</li>
<li><code>docker compose down</code>:<!-- -->
<ul>
<li>Stops and removes all containers, networks, and default volumes created by <code>docker compose up</code>.</li>
<li>Use <code>docker compose down --volumes</code> to also remove named volumes (useful for a clean slate, but be careful with production data!).</li>
</ul>
</li>
<li><code>docker compose ps</code>:<!-- -->
<ul>
<li>Lists all running services (containers) defined in your <code>docker-compose.yml</code> file, along with their status and ports.</li>
</ul>
</li>
<li><code>docker compose logs [service_name]</code>:<!-- -->
<ul>
<li>Displays the logs from all services.</li>
<li>You can specify a service_name (e.g., <code>docker compose logs backend</code>) to view logs for a specific service.</li>
<li>Use <code>-f</code> or <code>--follow</code> to stream logs in real-time.</li>
</ul>
</li>
<li><code>docker compose build [service_name]</code>:<!-- -->
<ul>
<li>Builds or re-builds images for services that have a build instruction.</li>
<li>You can specify a service_name to build only that service&#x27;s image.</li>
</ul>
</li>
<li><code>docker compose exec [service_name] [command]</code>:<!-- -->
<ul>
<li>Runs a command inside a running service container.</li>
<li>Example: <code>docker compose exec db psql -U user mydatabase</code> (to open a PostgreSQL client inside the db container).</li>
</ul>
</li>
<li><code>docker compose restart [service_name]</code>:<!-- -->
<ul>
<li>Restarts one or more services.</li>
</ul>
</li>
<li><code>docker compose stop [service_name]</code>:<!-- -->
<ul>
<li>Stops one or more running services without removing them.</li>
</ul>
</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-how-docker-compose-works-under-the-hood">4. How Docker Compose Works (Under the Hood)<a href="#4-how-docker-compose-works-under-the-hood" class="hash-link" aria-label="Direct link to 4. How Docker Compose Works (Under the Hood)" title="Direct link to 4. How Docker Compose Works (Under the Hood)">​</a></h3>
<p>When you run <code>docker compose up</code>:</p>
<ol>
<li><strong>Parsing the YAML:</strong> Docker Compose reads your <code>docker-compose.yml</code> file.</li>
<li><strong>Project Name:</strong> It determines a &quot;project name&quot; (usually based on the directory name where the <code>docker-compose.yml</code> file resides). This name is used to prefix resources (containers, networks, volumes) to isolate them from other Compose projects.</li>
<li><strong>Network Creation:</strong> It creates a default network (e.g., <code>myproject_default</code>) for all your services unless you define custom networks. This network allows services to communicate with each other using their service names as hostnames.</li>
<li><strong>Image Building/Pulling:</strong> For each service:<!-- -->
<ul>
<li>If a build instruction is present, it executes <code>docker build</code> to create the image.</li>
<li>If an image is specified, it pulls the image from Docker Hub (or configured registry).</li>
</ul>
</li>
<li><strong>Volume Creation:</strong> It creates any named volumes defined in the volumes section.</li>
<li><strong>Container Creation &amp; Start:</strong> It then creates and starts containers for each service, respecting <code>depends_on</code> order, and applying all the configurations (ports, environment variables, volumes, etc.) specified in the YAML file.</li>
<li><strong>Resource Grouping:</strong> All containers, networks, and volumes created by a single <code>docker compose up</code> command are grouped under the project name, making it easy to manage them as a single unit with <code>docker compose down</code>.</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-benefits-of-using-docker-compose">5. Benefits of Using Docker Compose<a href="#5-benefits-of-using-docker-compose" class="hash-link" aria-label="Direct link to 5. Benefits of Using Docker Compose" title="Direct link to 5. Benefits of Using Docker Compose">​</a></h3>
<ul>
<li><strong>Simplified Development Workflows:</strong> Spin up an entire complex application stack with one command (<code>docker compose up</code>), rather than multiple <code>docker run</code> commands with complex flags.</li>
<li><strong>Reproducibility:</strong> Ensures that every developer on a team, or any environment (dev, testing), runs the exact same application stack with the same configurations.</li>
<li><strong>Version Control for Infrastructure:</strong> The <code>docker-compose.yml</code> file can be version-controlled alongside your application code, treating your infrastructure configuration as code.</li>
<li><strong>Isolation:</strong> Each Compose project runs in its own isolated network, preventing port conflicts or service name clashes with other projects on the same host.</li>
<li><strong>Easy Scaling (for Development/Testing):</strong> While not a production-grade orchestrator like Kubernetes, you can easily scale individual services for testing purposes (e.g., <code>docker compose up --scale web=3</code>).</li>
<li><strong>Efficient Resource Management:</strong> Docker Compose intelligently recreates only the containers that have changed, saving time and resources during development iterations.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-where-docker-compose-excels-and-where-it-doesnt">6. Where Docker Compose Excels (and Where it Doesn&#x27;t)<a href="#6-where-docker-compose-excels-and-where-it-doesnt" class="hash-link" aria-label="Direct link to 6. Where Docker Compose Excels (and Where it Doesn&#x27;t)" title="Direct link to 6. Where Docker Compose Excels (and Where it Doesn&#x27;t)">​</a></h3>
<p><strong>Docker Compose is excellent for:</strong></p>
<ul>
<li>Local Development Environments: Its primary and most common use case.</li>
<li>Testing Environments: Setting up isolated integration or end-to-end testing environments.</li>
<li>CI/CD Pipelines: Creating temporary environments for automated builds and tests.</li>
<li>Simple, Single-Host Deployments: For smaller applications that don&#x27;t require high availability or complex scaling across multiple servers.</li>
</ul>
<p><strong>Docker Compose is generally NOT suitable for:</strong></p>
<ul>
<li>Production Orchestration of Large-Scale Applications: It&#x27;s designed for a single host. For multi-host, high-availability, auto-scaling, and advanced deployment strategies in production, you need a full-fledged container orchestration platform like Kubernetes or Docker Swarm.</li>
</ul>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Sandeep-Petwal/readmes/tree/main/packages/create-docusaurus/templates/shared/docs/Docker.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/readmes/docs/Backend/socket.io"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Socket.io</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/readmes/docs/Git"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Git</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-docker" class="table-of-contents__link toc-highlight">What is Docker?</a></li><li><a href="#key-docker-concepts" class="table-of-contents__link toc-highlight">Key Docker Concepts</a></li><li><a href="#5-the-docker-workflow-simplified" class="table-of-contents__link toc-highlight">5. The Docker Workflow (Simplified)</a></li><li><a href="#6-benefits-of-containerization-and-docker" class="table-of-contents__link toc-highlight">6. Benefits of Containerization (and Docker)</a></li><li><a href="#7-real-world-applications-in-web-development" class="table-of-contents__link toc-highlight">7. Real-World Applications in Web Development</a></li><li><a href="#8-conclusion-and-next-steps" class="table-of-contents__link toc-highlight">8. Conclusion and Next Steps</a></li><li><a href="#commands" class="table-of-contents__link toc-highlight">Commands</a><ul><li><a href="#a-containers" class="table-of-contents__link toc-highlight">A. Containers</a></li><li><a href="#b-images" class="table-of-contents__link toc-highlight">B. Images</a></li></ul></li><li><a href="#what-is-port-mapping" class="table-of-contents__link toc-highlight">What is Port Mapping?</a></li><li><a href="#1-what-is-docker-compose" class="table-of-contents__link toc-highlight">1. What is Docker Compose?</a></li><li><a href="#2-the-docker-composeyml-file-the-heart-of-compose" class="table-of-contents__link toc-highlight">2. The docker-compose.yml File: The Heart of Compose</a><ul><li><a href="#structure-of-a-docker-composeyml-file" class="table-of-contents__link toc-highlight">Structure of a docker-compose.yml File</a></li><li><a href="#3-key-docker-compose-commands" class="table-of-contents__link toc-highlight">3. Key Docker Compose Commands</a></li><li><a href="#4-how-docker-compose-works-under-the-hood" class="table-of-contents__link toc-highlight">4. How Docker Compose Works (Under the Hood)</a></li><li><a href="#5-benefits-of-using-docker-compose" class="table-of-contents__link toc-highlight">5. Benefits of Using Docker Compose</a></li><li><a href="#6-where-docker-compose-excels-and-where-it-doesnt" class="table-of-contents__link toc-highlight">6. Where Docker Compose Excels (and Where it Doesn&#39;t)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/readmes/docs/category/frontend-technologies">Frontend Technologies</a></li><li class="footer__item"><a class="footer__link-item" href="/readmes/docs/category/backend-technologies">Backend Technologies</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://sandeepprasad.xyz/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/Sandeep-Petwal/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/readmes/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/readmes/docs/intro">About</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Sandeep Prasad. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>